import{_ as i,c as d,a,d as e,e as t,f as r,r as p,o,b as l}from"./app-BCC5ysrj.js";const c={},u={class:"vuepress-toc"},m={class:"vuepress-toc-item"},h={class:"vuepress-toc-item"},v={class:"vuepress-toc-item"},b={class:"vuepress-toc-item"},k={class:"vuepress-toc-item"},g={class:"vuepress-toc-item"},f={class:"vuepress-toc-item"},x={class:"vuepress-toc-item"},_={class:"vuepress-toc-item"},C={class:"vuepress-toc-item"},y={class:"vuepress-toc-item"},w={class:"vuepress-toc-item"};function q(S,s){const n=p("router-link");return o(),d("div",null,[s[12]||(s[12]=a("h1",{id:"多类型资源统计工具-dstat",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#多类型资源统计工具-dstat"},[a("span",null,"多类型资源统计工具: dstat")])],-1)),a("nav",u,[a("ul",null,[a("li",m,[e(n,{to:"#简介"},{default:t(()=>s[0]||(s[0]=[l("简介")])),_:1})]),a("li",h,[e(n,{to:"#安装"},{default:t(()=>s[1]||(s[1]=[l("安装")])),_:1}),a("ul",null,[a("li",v,[e(n,{to:"#centos-rhel"},{default:t(()=>s[2]||(s[2]=[l("CentOS/RHEL")])),_:1})]),a("li",b,[e(n,{to:"#ubuntu-debian"},{default:t(()=>s[3]||(s[3]=[l("Ubuntu/Debian")])),_:1})])])]),a("li",k,[e(n,{to:"#使用方法"},{default:t(()=>s[4]||(s[4]=[l("使用方法")])),_:1}),a("ul",null,[a("li",g,[e(n,{to:"#基本语法"},{default:t(()=>s[5]||(s[5]=[l("基本语法")])),_:1})]),a("li",f,[e(n,{to:"#常用参数"},{default:t(()=>s[6]||(s[6]=[l("常用参数")])),_:1})]),a("li",x,[e(n,{to:"#输出示例"},{default:t(()=>s[7]||(s[7]=[l("输出示例")])),_:1})])])]),a("li",_,[e(n,{to:"#实用脚本"},{default:t(()=>s[8]||(s[8]=[l("实用脚本")])),_:1}),a("ul",null,[a("li",C,[e(n,{to:"#监控网络状态并发送报告"},{default:t(()=>s[9]||(s[9]=[l("监控网络状态并发送报告")])),_:1})]),a("li",y,[e(n,{to:"#定时任务配置"},{default:t(()=>s[10]||(s[10]=[l("定时任务配置")])),_:1})])])]),a("li",w,[e(n,{to:"#最佳实践"},{default:t(()=>s[11]||(s[11]=[l("最佳实践")])),_:1})])])]),s[13]||(s[13]=r(`<hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>该命令整合了vmstat，iostat和ifstat三种命令。同时增加了新的特性和功能可以让你能及时看到各种的资源使用情况，从而能够使你对比和整合不同的资源使用情况。通过不同颜色和区块布局的界面帮助你能够更加清晰容易的获取信息。它也支持将信息数据导出到cvs格式文件中，从而用其他应用程序打开，或者导入到数据库中。</p><p>dstat 是一个功能强大的系统资源统计工具，具有以下特点：</p><ul><li>整合了 vmstat、iostat、ifstat 等多个工具的功能</li><li>实时显示系统资源使用状况</li><li>支持彩色输出和模块化显示</li><li>可导出 CSV 格式数据用于后续分析</li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><h3 id="centos-rhel" tabindex="-1"><a class="header-anchor" href="#centos-rhel"><span>CentOS/RHEL</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> dstat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ubuntu-debian" tabindex="-1"><a class="header-anchor" href="#ubuntu-debian"><span>Ubuntu/Debian</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">apt-get</span> <span class="token function">install</span> dstat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用方法" tabindex="-1"><a class="header-anchor" href="#使用方法"><span>使用方法</span></a></h2><h3 id="基本语法" tabindex="-1"><a class="header-anchor" href="#基本语法"><span>基本语法</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">dstat <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>delay <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="常用参数" tabindex="-1"><a class="header-anchor" href="#常用参数"><span>常用参数</span></a></h3><table><thead><tr><th>参数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>-c</td><td>CPU 状态</td><td>dstat -c</td></tr><tr><td>-m</td><td>内存状态</td><td>dstat -m</td></tr><tr><td>-n</td><td>网络状态</td><td>dstat -n</td></tr><tr><td>-d</td><td>磁盘 I/O</td><td>dstat -d</td></tr><tr><td>-r</td><td>I/O 请求</td><td>dstat -r</td></tr><tr><td>-s</td><td>交换分区</td><td>dstat -s</td></tr><tr><td>-t</td><td>显示时间</td><td>dstat -t</td></tr><tr><td>--top-cpu</td><td>CPU 使用率最高的进程</td><td>dstat --top-cpu</td></tr><tr><td>--top-mem</td><td>内存使用最多的进程</td><td>dstat --top-mem</td></tr></tbody></table><h3 id="输出示例" tabindex="-1"><a class="header-anchor" href="#输出示例"><span>输出示例</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 监控 CPU 和内存状态，每 2 秒更新一次，共 5 次</span></span>
<span class="line">dstat <span class="token parameter variable">-cm</span> <span class="token number">2</span> <span class="token number">5</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 监控网络和磁盘 I/O</span></span>
<span class="line">dstat <span class="token parameter variable">-dn</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 导出到 CSV 文件</span></span>
<span class="line">dstat <span class="token parameter variable">--output</span> report.csv <span class="token parameter variable">-cdn</span> <span class="token number">2</span> <span class="token number">10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实用脚本" tabindex="-1"><a class="header-anchor" href="#实用脚本"><span>实用脚本</span></a></h2><h3 id="监控网络状态并发送报告" tabindex="-1"><a class="header-anchor" href="#监控网络状态并发送报告"><span>监控网络状态并发送报告</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">date</span> +%Y-%m-%d<span class="token variable">\`</span></span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token variable">$time</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 收集网络状态数据</span></span>
<span class="line">dstat <span class="token parameter variable">-tcf</span> <span class="token parameter variable">--output</span> /tmp/eths_<span class="token variable">$time</span>.csv <span class="token number">1</span> <span class="token number">40</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 发送邮件报告</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$time</span>网路状态&quot;</span> <span class="token operator">|</span> mail <span class="token parameter variable">-a</span> /tmp/eths_<span class="token variable">$time</span>.csv <span class="token string">&quot;<span class="token variable">$time</span>网络状态&quot;</span> xxxx@qq.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="定时任务配置" tabindex="-1"><a class="header-anchor" href="#定时任务配置"><span>定时任务配置</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">crontab</span> <span class="token parameter variable">-e</span></span>
<span class="line"><span class="token number">0</span> <span class="token number">10</span> * * * /usr/src/dstat_consol.sh <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>监控建议</strong></p><ul><li>根据需求选择合适的监控指标</li><li>设置合理的采样间隔</li><li>避免过多的输出项影响可读性</li></ul></li><li><p><strong>数据处理</strong></p><ul><li>定期导出数据进行分析</li><li>设置自动清理机制</li><li>建立监控告警阈值</li></ul></li></ol><blockquote><p><strong>注意：</strong></p><ul><li>时间参数要放在输出参数后面</li><li>合理使用 CSV 输出功能</li><li>注意数据存储空间</li></ul><p><strong>参考资料：</strong></p><ul><li><a href="https://github.com/dagwieers/dstat" target="_blank" rel="noopener noreferrer">dstat 官方文档</a></li><li><a href="https://www.kernel.org/doc/Documentation/accounting/taskstats.txt" target="_blank" rel="noopener noreferrer">Linux 性能监控工具</a></li></ul></blockquote>`,25))])}const V=i(c,[["render",q],["__file","dstat.html.vue"]]),j=JSON.parse('{"path":"/flinux/Commands/dstat.html","title":"多类型资源统计工具: dstat","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[{"level":3,"title":"CentOS/RHEL","slug":"centos-rhel","link":"#centos-rhel","children":[]},{"level":3,"title":"Ubuntu/Debian","slug":"ubuntu-debian","link":"#ubuntu-debian","children":[]}]},{"level":2,"title":"使用方法","slug":"使用方法","link":"#使用方法","children":[{"level":3,"title":"基本语法","slug":"基本语法","link":"#基本语法","children":[]},{"level":3,"title":"常用参数","slug":"常用参数","link":"#常用参数","children":[]},{"level":3,"title":"输出示例","slug":"输出示例","link":"#输出示例","children":[]}]},{"level":2,"title":"实用脚本","slug":"实用脚本","link":"#实用脚本","children":[{"level":3,"title":"监控网络状态并发送报告","slug":"监控网络状态并发送报告","link":"#监控网络状态并发送报告","children":[]},{"level":3,"title":"定时任务配置","slug":"定时任务配置","link":"#定时任务配置","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[]}],"git":{"updatedTime":1701223649000,"contributors":[{"name":"Linkefou","username":"Linkefou","email":"wlh724567296@163.com","commits":1},{"name":"wanglinhao","username":"wanglinhao","email":"wanglinhao@wegooooo.com","commits":1}]},"filePathRelative":"flinux/Commands/dstat.md"}');export{V as comp,j as data};
