import{_ as t,c,a as n,d as a,e as l,f as p,r as d,o as r,b as i}from"./app-BCC5ysrj.js";const o={},u={class:"vuepress-toc"},m={class:"vuepress-toc-item"},v={class:"vuepress-toc-item"},h={class:"vuepress-toc-item"},b={class:"vuepress-toc-item"},k={class:"vuepress-toc-item"},y={class:"vuepress-toc-item"},f={class:"vuepress-toc-item"},_={class:"vuepress-toc-item"},g={class:"vuepress-toc-item"},x={class:"vuepress-toc-item"};function S(B,s){const e=d("router-link");return r(),c("div",null,[s[10]||(s[10]=n("h1",{id:"系统服务配置",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#系统服务配置"},[n("span",null,"系统服务配置")])],-1)),n("nav",u,[n("ul",null,[n("li",m,[a(e,{to:"#systemd-服务管理"},{default:l(()=>s[0]||(s[0]=[i("Systemd 服务管理")])),_:1}),n("ul",null,[n("li",v,[a(e,{to:"#服务单元介绍"},{default:l(()=>s[1]||(s[1]=[i("服务单元介绍")])),_:1})]),n("li",h,[a(e,{to:"#服务状态查看"},{default:l(()=>s[2]||(s[2]=[i("服务状态查看")])),_:1})]),n("li",b,[a(e,{to:"#服务状态说明"},{default:l(()=>s[3]||(s[3]=[i("服务状态说明")])),_:1})]),n("li",k,[a(e,{to:"#服务管理命令"},{default:l(()=>s[4]||(s[4]=[i("服务管理命令")])),_:1})]),n("li",y,[a(e,{to:"#系统管理"},{default:l(()=>s[5]||(s[5]=[i("系统管理")])),_:1})])])]),n("li",f,[a(e,{to:"#服务配置文件"},{default:l(()=>s[6]||(s[6]=[i("服务配置文件")])),_:1}),n("ul",null,[n("li",_,[a(e,{to:"#配置文件位置"},{default:l(()=>s[7]||(s[7]=[i("配置文件位置")])),_:1})]),n("li",g,[a(e,{to:"#配置文件示例"},{default:l(()=>s[8]||(s[8]=[i("配置文件示例")])),_:1})])])]),n("li",x,[a(e,{to:"#最佳实践"},{default:l(()=>s[9]||(s[9]=[i("最佳实践")])),_:1})])])]),s[11]||(s[11]=p(`<hr><h2 id="systemd-服务管理" tabindex="-1"><a class="header-anchor" href="#systemd-服务管理"><span>Systemd 服务管理</span></a></h2><h3 id="服务单元介绍" tabindex="-1"><a class="header-anchor" href="#服务单元介绍"><span>服务单元介绍</span></a></h3><p>Systemd 中的服务单元(Unit)是系统服务的基本单位：</p><ul><li>以 <code>.service</code> 结尾的文件表示一个服务</li><li>支持开机自启动配置</li><li>可以管理传统的 init 服务</li></ul><h3 id="服务状态查看" tabindex="-1"><a class="header-anchor" href="#服务状态查看"><span>服务状态查看</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 列出所有服务单元</span></span>
<span class="line">systemctl list-unit-files <span class="token parameter variable">--type</span><span class="token operator">=</span>service</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看服务详细信息</span></span>
<span class="line">systemctl status service_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看服务配置文件</span></span>
<span class="line">systemctl <span class="token function">cat</span> service_name.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务状态说明" tabindex="-1"><a class="header-anchor" href="#服务状态说明"><span>服务状态说明</span></a></h3><table><thead><tr><th>STATE</th><th>说明</th></tr></thead><tbody><tr><td>disabled</td><td>开机不启动</td></tr><tr><td>enabled</td><td>开机自启动</td></tr><tr><td>static</td><td>对应的Unit文件没有定义[Install]区域，所以无法设置为开机启动</td></tr><tr><td>masked</td><td>服务被禁止启动</td></tr></tbody></table><h3 id="服务管理命令" tabindex="-1"><a class="header-anchor" href="#服务管理命令"><span>服务管理命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 启动服务</span></span>
<span class="line">systemctl start service_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 停止服务</span></span>
<span class="line">systemctl stop service_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 重启服务</span></span>
<span class="line">systemctl restart service_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 重新加载配置</span></span>
<span class="line">systemctl reload service_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 设置开机自启</span></span>
<span class="line">systemctl <span class="token builtin class-name">enable</span> service_name</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 禁用开机自启</span></span>
<span class="line">systemctl disable service_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="系统管理" tabindex="-1"><a class="header-anchor" href="#系统管理"><span>系统管理</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 查看启动失败的服务</span></span>
<span class="line">systemctl <span class="token parameter variable">--failed</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 重新加载所有服务文件</span></span>
<span class="line">systemctl daemon-relaod</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务配置文件" tabindex="-1"><a class="header-anchor" href="#服务配置文件"><span>服务配置文件</span></a></h2><h3 id="配置文件位置" tabindex="-1"><a class="header-anchor" href="#配置文件位置"><span>配置文件位置</span></a></h3><ul><li><code>/etc/systemd/system/</code> - 系统服务配置文件</li><li><code>/usr/lib/systemd/system/</code> - 软件包安装的服务文件</li></ul><h3 id="配置文件示例" tabindex="-1"><a class="header-anchor" href="#配置文件示例"><span>配置文件示例</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre><code><span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">My Service</span></span>
<span class="line"><span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">network.target</span></span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span></span>
<span class="line"><span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/bin/myservice</span></span>
<span class="line"><span class="token key attr-name">Restart</span><span class="token punctuation">=</span><span class="token value attr-value">always</span></span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>服务管理</strong></p><ul><li>使用 systemctl 管理服务</li><li>定期检查服务状态</li><li>及时处理失败服务</li></ul></li><li><p><strong>配置建议</strong></p><ul><li>遵循最小权限原则</li><li>合理设置依赖关系</li><li>添加适当的服务描述</li></ul></li></ol><blockquote><p><strong>注意：</strong></p><ul><li>修改配置后需要重新加载</li><li>注意服务间的依赖关系</li><li>重要服务建议设置自动重启</li></ul></blockquote>`,21))])}const L=t(o,[["render",S],["__file","Linux-系统服务配置.html.vue"]]),N=JSON.parse('{"path":"/flinux/Systemd/Linux-%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE.html","title":"系统服务配置","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Systemd 服务管理","slug":"systemd-服务管理","link":"#systemd-服务管理","children":[{"level":3,"title":"服务单元介绍","slug":"服务单元介绍","link":"#服务单元介绍","children":[]},{"level":3,"title":"服务状态查看","slug":"服务状态查看","link":"#服务状态查看","children":[]},{"level":3,"title":"服务状态说明","slug":"服务状态说明","link":"#服务状态说明","children":[]},{"level":3,"title":"服务管理命令","slug":"服务管理命令","link":"#服务管理命令","children":[]},{"level":3,"title":"系统管理","slug":"系统管理","link":"#系统管理","children":[]}]},{"level":2,"title":"服务配置文件","slug":"服务配置文件","link":"#服务配置文件","children":[{"level":3,"title":"配置文件位置","slug":"配置文件位置","link":"#配置文件位置","children":[]},{"level":3,"title":"配置文件示例","slug":"配置文件示例","link":"#配置文件示例","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[]}],"git":{"updatedTime":1701020615000,"contributors":[{"name":"Linkefou","username":"Linkefou","email":"wlh724567296@163.com","commits":1}]},"filePathRelative":"flinux/Systemd/Linux-系统服务配置.md"}');export{L as comp,N as data};
