import{_ as t,c as o,a as e,d as a,e as l,f as r,r as c,o as d,b as i}from"./app-BCC5ysrj.js";const p={},u={class:"vuepress-toc"},m={class:"vuepress-toc-item"},v={class:"vuepress-toc-item"},h={class:"vuepress-toc-item"},k={class:"vuepress-toc-item"},_={class:"vuepress-toc-item"},b={class:"vuepress-toc-item"},g={class:"vuepress-toc-item"},f={class:"vuepress-toc-item"},y={class:"vuepress-toc-item"},x={class:"vuepress-toc-item"},q={class:"vuepress-toc-item"};function E(j,s){const n=c("router-link");return d(),o("div",null,[s[11]||(s[11]=e("h1",{id:"_10-修改docker的启动项",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_10-修改docker的启动项"},[e("span",null,"10. 修改docker的启动项")])],-1)),e("nav",u,[e("ul",null,[e("li",m,[a(n,{to:"#简介"},{default:l(()=>s[0]||(s[0]=[i("简介")])),_:1})]),e("li",v,[a(n,{to:"#_1-配置文件位置"},{default:l(()=>s[1]||(s[1]=[i("1. 配置文件位置")])),_:1})]),e("li",h,[a(n,{to:"#_2-常用配置项"},{default:l(()=>s[2]||(s[2]=[i("2. 常用配置项")])),_:1}),e("ul",null,[e("li",k,[a(n,{to:"#_2-1-存储配置"},{default:l(()=>s[3]||(s[3]=[i("2.1 存储配置")])),_:1})]),e("li",_,[a(n,{to:"#_2-2-镜像源配置"},{default:l(()=>s[4]||(s[4]=[i("2.2 镜像源配置")])),_:1})]),e("li",b,[a(n,{to:"#_2-3-安全配置"},{default:l(()=>s[5]||(s[5]=[i("2.3 安全配置")])),_:1})])])]),e("li",g,[a(n,{to:"#_3-systemd-服务配置"},{default:l(()=>s[6]||(s[6]=[i("3. systemd 服务配置")])),_:1}),e("ul",null,[e("li",f,[a(n,{to:"#_3-1-修改服务文件"},{default:l(()=>s[7]||(s[7]=[i("3.1 修改服务文件")])),_:1})]),e("li",y,[a(n,{to:"#_3-2-参数说明"},{default:l(()=>s[8]||(s[8]=[i("3.2 参数说明")])),_:1})]),e("li",x,[a(n,{to:"#_3-3-重启服务"},{default:l(()=>s[9]||(s[9]=[i("3.3 重启服务")])),_:1})])])]),e("li",q,[a(n,{to:"#_4-最佳实践"},{default:l(()=>s[10]||(s[10]=[i("4. 最佳实践")])),_:1})])])]),s[12]||(s[12]=r(`<hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Docker 守护进程(Docker daemon)的配置可以通过多种方式修改，本文主要介绍通过 systemd 服务配置文件来修改 Docker 的启动参数。</p><h2 id="_1-配置文件位置" tabindex="-1"><a class="header-anchor" href="#_1-配置文件位置"><span>1. 配置文件位置</span></a></h2><ul><li>主配置文件：<code>/etc/docker/daemon.json</code></li><li>systemd 服务文件：<code>/lib/systemd/system/docker.service</code></li></ul><h2 id="_2-常用配置项" tabindex="-1"><a class="header-anchor" href="#_2-常用配置项"><span>2. 常用配置项</span></a></h2><h3 id="_2-1-存储配置" tabindex="-1"><a class="header-anchor" href="#_2-1-存储配置"><span>2.1 存储配置</span></a></h3><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;data-root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/your/docker&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>说明：</strong> 修改 Docker 根目录位置，默认为 <code>/var/lib/docker</code></p></blockquote><h3 id="_2-2-镜像源配置" tabindex="-1"><a class="header-anchor" href="#_2-2-镜像源配置"><span>2.2 镜像源配置</span></a></h3><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;https://mirror.ccs.tencentyun.com&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;https://registry.docker-cn.com&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-安全配置" tabindex="-1"><a class="header-anchor" href="#_2-3-安全配置"><span>2.3 安全配置</span></a></h3><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;insecure-registries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;192.168.1.100:5000&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-systemd-服务配置" tabindex="-1"><a class="header-anchor" href="#_3-systemd-服务配置"><span>3. systemd 服务配置</span></a></h2><h3 id="_3-1-修改服务文件" tabindex="-1"><a class="header-anchor" href="#_3-1-修改服务文件"><span>3.1 修改服务文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 编辑服务配置文件</span></span>
<span class="line"><span class="token function">vim</span> /lib/systemd/system/docker.service</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 在 ExecStart 行添加参数</span></span>
<span class="line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd <span class="token punctuation">\\</span></span>
<span class="line">  --insecure-registry registry.example.com <span class="token punctuation">\\</span></span>
<span class="line">  --data-root /path/to/docker <span class="token punctuation">\\</span></span>
<span class="line">  --registry-mirror https://mirror.example.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-参数说明" tabindex="-1"><a class="header-anchor" href="#_3-2-参数说明"><span>3.2 参数说明</span></a></h3><ul><li><code>--data-root</code>: 指定 Docker 根目录</li><li><code>--insecure-registry</code>: 允许使用不安全的私有仓库</li><li><code>--registry-mirror</code>: 配置镜像加速器</li></ul><h3 id="_3-3-重启服务" tabindex="-1"><a class="header-anchor" href="#_3-3-重启服务"><span>3.3 重启服务</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 重新加载配置</span></span>
<span class="line">systemctl daemon-reload</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 重启 Docker 服务</span></span>
<span class="line">systemctl restart <span class="token function">docker</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看服务状态</span></span>
<span class="line">systemctl status <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-最佳实践" tabindex="-1"><a class="header-anchor" href="#_4-最佳实践"><span>4. 最佳实践</span></a></h2><ul><li>优先使用 <code>daemon.json</code> 进行配置</li><li>使用 systemd 管理 Docker 服务</li><li>定期备份配置文件</li><li>修改配置后进行测试验证</li></ul><blockquote><p><strong>注意：</strong> 修改配置后必须重启 Docker 服务才能生效</p></blockquote>`,23))])}const B=t(p,[["render",E],["__file","Docker系列学习-10.修改docker启动项.html.vue"]]),A=JSON.parse('{"path":"/flinux/Kubernetes/Docker%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0/Docker%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-10.%E4%BF%AE%E6%94%B9docker%E5%90%AF%E5%8A%A8%E9%A1%B9.html","title":"10. 修改docker的启动项","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"1. 配置文件位置","slug":"_1-配置文件位置","link":"#_1-配置文件位置","children":[]},{"level":2,"title":"2. 常用配置项","slug":"_2-常用配置项","link":"#_2-常用配置项","children":[{"level":3,"title":"2.1 存储配置","slug":"_2-1-存储配置","link":"#_2-1-存储配置","children":[]},{"level":3,"title":"2.2 镜像源配置","slug":"_2-2-镜像源配置","link":"#_2-2-镜像源配置","children":[]},{"level":3,"title":"2.3 安全配置","slug":"_2-3-安全配置","link":"#_2-3-安全配置","children":[]}]},{"level":2,"title":"3. systemd 服务配置","slug":"_3-systemd-服务配置","link":"#_3-systemd-服务配置","children":[{"level":3,"title":"3.1 修改服务文件","slug":"_3-1-修改服务文件","link":"#_3-1-修改服务文件","children":[]},{"level":3,"title":"3.2 参数说明","slug":"_3-2-参数说明","link":"#_3-2-参数说明","children":[]},{"level":3,"title":"3.3 重启服务","slug":"_3-3-重启服务","link":"#_3-3-重启服务","children":[]}]},{"level":2,"title":"4. 最佳实践","slug":"_4-最佳实践","link":"#_4-最佳实践","children":[]}],"git":{"updatedTime":1709276200000,"contributors":[{"name":"Linkefou","username":"Linkefou","email":"wlh724567296@163.com","commits":1},{"name":"wanglinhao","username":"wanglinhao","email":"wanglinhao@wegooooo.com","commits":2}]},"filePathRelative":"flinux/Kubernetes/Docker系列学习/Docker系列学习-10.修改docker启动项.md"}');export{B as comp,A as data};
