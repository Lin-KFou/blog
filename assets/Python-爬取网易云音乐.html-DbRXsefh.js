import{_ as t,c as p,a as n,d as e,e as l,f as o,r as c,o as r,b as i}from"./app-BCC5ysrj.js";const u={},d={class:"vuepress-toc"},v={class:"vuepress-toc-item"},m={class:"vuepress-toc-item"},k={class:"vuepress-toc-item"},h={class:"vuepress-toc-item"},b={class:"vuepress-toc-item"},g={class:"vuepress-toc-item"},f={class:"vuepress-toc-item"},_={class:"vuepress-toc-item"},y={class:"vuepress-toc-item"},w={class:"vuepress-toc-item"};function x(q,s){const a=c("router-link");return r(),p("div",null,[s[10]||(s[10]=n("h1",{id:"python-爬取网易云音乐",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#python-爬取网易云音乐"},[n("span",null,"Python: 爬取网易云音乐")])],-1)),n("nav",d,[n("ul",null,[n("li",v,[e(a,{to:"#环境准备"},{default:l(()=>s[0]||(s[0]=[i("环境准备")])),_:1}),n("ul",null,[n("li",m,[e(a,{to:"#安装-selenium"},{default:l(()=>s[1]||(s[1]=[i("安装 selenium")])),_:1})]),n("li",k,[e(a,{to:"#下载-webdriver"},{default:l(()=>s[2]||(s[2]=[i("下载 WebDriver")])),_:1})])])]),n("li",h,[e(a,{to:"#配置环境"},{default:l(()=>s[3]||(s[3]=[i("配置环境")])),_:1}),n("ul",null,[n("li",b,[e(a,{to:"#_1-全局配置"},{default:l(()=>s[4]||(s[4]=[i("1. 全局配置")])),_:1})]),n("li",g,[e(a,{to:"#_2-本地配置"},{default:l(()=>s[5]||(s[5]=[i("2. 本地配置")])),_:1})])])]),n("li",f,[e(a,{to:"#使用示例"},{default:l(()=>s[6]||(s[6]=[i("使用示例")])),_:1}),n("ul",null,[n("li",_,[e(a,{to:"#基本测试"},{default:l(()=>s[7]||(s[7]=[i("基本测试")])),_:1})]),n("li",y,[e(a,{to:"#爬取音乐"},{default:l(()=>s[8]||(s[8]=[i("爬取音乐")])),_:1})])])]),n("li",w,[e(a,{to:"#最佳实践"},{default:l(()=>s[9]||(s[9]=[i("最佳实践")])),_:1})])])]),s[11]||(s[11]=o(`<hr><h2 id="环境准备" tabindex="-1"><a class="header-anchor" href="#环境准备"><span>环境准备</span></a></h2><h3 id="安装-selenium" tabindex="-1"><a class="header-anchor" href="#安装-selenium"><span>安装 selenium</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># pip 安装</span></span>
<span class="line">pip <span class="token function">install</span> selenium</span>
<span class="line"><span class="token comment"># conda 安装</span></span>
<span class="line">conda <span class="token function">install</span> selenium</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="下载-webdriver" tabindex="-1"><a class="header-anchor" href="#下载-webdriver"><span>下载 WebDriver</span></a></h3><p>Selenium 需要对应浏览器的 WebDriver 才能工作:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># WebDriver 下载地址</span>
<span class="line">Chrome:  https://sites.google.com/chromium.org/driver/</span>
<span class="line">Firefox: https://github.com/mozilla/geckodriver/releases</span>
<span class="line">Edge:    https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置环境" tabindex="-1"><a class="header-anchor" href="#配置环境"><span>配置环境</span></a></h2><p>WebDriver 配置有两种方式:</p><h3 id="_1-全局配置" tabindex="-1"><a class="header-anchor" href="#_1-全局配置"><span>1. 全局配置</span></a></h3><ul><li>将 WebDriver 放在 Python 安装目录</li><li>所有项目都可以使用</li><li>推荐使用这种方式</li></ul><h3 id="_2-本地配置" tabindex="-1"><a class="header-anchor" href="#_2-本地配置"><span>2. 本地配置</span></a></h3><ul><li>将 WebDriver 放在项目目录</li><li>只对当前项目有效</li><li>不推荐,维护成本高</li></ul><h2 id="使用示例" tabindex="-1"><a class="header-anchor" href="#使用示例"><span>使用示例</span></a></h2><h3 id="基本测试" tabindex="-1"><a class="header-anchor" href="#基本测试"><span>基本测试</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>chrome<span class="token punctuation">.</span>service <span class="token keyword">import</span> Service</span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 配置 ChromeDriver</span></span>
<span class="line">service <span class="token operator">=</span> Service<span class="token punctuation">(</span><span class="token string">&#39;path/to/chromedriver&#39;</span><span class="token punctuation">)</span></span>
<span class="line">driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>service<span class="token operator">=</span>service<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 访问网页</span></span>
<span class="line">driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;https://music.163.com/&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;页面标题: </span><span class="token interpolation"><span class="token punctuation">{</span>driver<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 关闭浏览器</span></span>
<span class="line">driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="爬取音乐" tabindex="-1"><a class="header-anchor" href="#爬取音乐"><span>爬取音乐</span></a></h3><blockquote><p>不保证时效性</p></blockquote><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">crawl_music</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;爬取网易云音乐&quot;&quot;&quot;</span></span>
<span class="line">    driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>service<span class="token operator">=</span>service<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 访问歌单页面</span></span>
<span class="line">        driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;https://music.163.com/#/playlist?id=xxxx&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># 切换到内容 iframe</span></span>
<span class="line">        driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span><span class="token string">&quot;g_iframe&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># 获取歌曲列表</span></span>
<span class="line">        songs <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token string">&#39;.ttc&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># 提取歌曲信息</span></span>
<span class="line">        <span class="token keyword">for</span> song <span class="token keyword">in</span> songs<span class="token punctuation">:</span></span>
<span class="line">            title <span class="token operator">=</span> song<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">&#39;title&#39;</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;歌曲: </span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            </span>
<span class="line">    <span class="token keyword">finally</span><span class="token punctuation">:</span></span>
<span class="line">        driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>配置建议</strong></p><ul><li>使用全局 WebDriver</li><li>及时更新版本</li><li>做好异常处理</li></ul></li><li><p><strong>爬取建议</strong></p><ul><li>添加延时等待</li><li>模拟真实用户行为</li><li>遵守网站规则</li></ul></li></ol><blockquote><p><strong>注意：</strong></p><ul><li>确保 WebDriver 版本匹配</li><li>处理网页加载延迟</li><li>注意反爬虫机制</li></ul></blockquote>`,22))])}const E=t(u,[["render",x],["__file","Python-爬取网易云音乐.html.vue"]]),B=JSON.parse('{"path":"/fpython/example/Python-%E7%88%AC%E5%8F%96%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90.html","title":"Python: 爬取网易云音乐","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"环境准备","slug":"环境准备","link":"#环境准备","children":[{"level":3,"title":"安装 selenium","slug":"安装-selenium","link":"#安装-selenium","children":[]},{"level":3,"title":"下载 WebDriver","slug":"下载-webdriver","link":"#下载-webdriver","children":[]}]},{"level":2,"title":"配置环境","slug":"配置环境","link":"#配置环境","children":[{"level":3,"title":"1. 全局配置","slug":"_1-全局配置","link":"#_1-全局配置","children":[]},{"level":3,"title":"2. 本地配置","slug":"_2-本地配置","link":"#_2-本地配置","children":[]}]},{"level":2,"title":"使用示例","slug":"使用示例","link":"#使用示例","children":[{"level":3,"title":"基本测试","slug":"基本测试","link":"#基本测试","children":[]},{"level":3,"title":"爬取音乐","slug":"爬取音乐","link":"#爬取音乐","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[]}],"git":{"updatedTime":1735029308000,"contributors":[{"name":"wanglinhao","username":"wanglinhao","email":"wanglinhao@wegooooo.com","commits":4}]},"filePathRelative":"fpython/example/Python-爬取网易云音乐.md"}');export{E as comp,B as data};
